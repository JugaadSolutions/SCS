/*
*------------------------------------------------------------------------------
* Include Files
*------------------------------------------------------------------------------
*/

#include "config.h"
#include "digit_driver.h"


/*
*------------------------------------------------------------------------------
* Private Defines
*------------------------------------------------------------------------------
*/

/*
*------------------------------------------------------------------------------
* Private Macros
*------------------------------------------------------------------------------
*/


/*
*------------------------------------------------------------------------------
* Private Data Types
*------------------------------------------------------------------------------
*/

/*
*------------------------------------------------------------------------------
* Public Variables
*------------------------------------------------------------------------------
*/




/*
*------------------------------------------------------------------------------
* Private Variables (static)
*------------------------------------------------------------------------------
*/


/*
*------------------------------------------------------------------------------
* Public Constants
*------------------------------------------------------------------------------
*/

/*
*------------------------------------------------------------------------------
* Private Constants (static)
* ------------------------------------------------------------------------------
*/

const rom UINT8 LED_MAP[11] = {0xbf,0x86,0xdb,0xcf,0xe6,0xed,0xfd,0x87,0xff,0xef,0x00};

/*
*------------------------------------------------------------------------------
* Private Function Prototypes (static)
*------------------------------------------------------------------------------
*/

/*
*------------------------------------------------------------------------------
* Private Functions
*------------------------------------------------------------------------------
*/

/*
*------------------------------------------------------------------------------
* void DDR_loadDigit(UINT8 digit, UINT8 data)
*
* Summary	: Write one byte data on the bus
*
* Input		: UINT8 digit - digit number to write the data
*			  UINT8 dataByte - data byte for the digit
*
* Output	: None
*------------------------------------------------------------------------------
*/
void DDR_loadDigit(UINT8 digit, UINT8 data)
{

	DISABLE_TMR1_INTERRUPT();

	DISPLAY_CONTROL = DISPLAY_DISABLE;	//disable the display
	DelayMs(1);						//delay for the data to stabilize

	DIGIT_PORT = digit;					//set the address
	DATA_PORT = ~LED_MAP[data];					// write data

	DISPLAY_CONTROL = DISPLAY_ENABLE;	//enable the display
	DelayMs(1);						//delay for the data to stabilize
	DISPLAY_CONTROL = DISPLAY_DISABLE;	//disable it again
	ENABLE_TMR1_INTERRUPT();
	
}


void DDR_loadDigit_test(UINT8 digit, UINT8 data)
{

//	UART1_write(digit);
//	UART1_transmit();
//	UART1_write(LED_MAP[data]);
//	UART1_transmit();
	
}

/*
*  End of digit_driver.c
*/